{% extends "layout.html" %}

{% block content %}
<article>
    <h1>Expense Registration</h1>
    <form method="POST" x-data="{ items: [0,1,2,3,4], counter: 5 }">
        {% csrf_token %}
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>

        <label for="subsidiary">Subsidiary:</label>
        <select id="subsidiary" name="subsidiary" required>
            {% for subsidiary in subsidiaries %}
                <option value="{{ subsidiary.id }}">{{ subsidiary.name }}</option>
            {% endfor %}
        </select>

        <template x-for="(item, index) in items" :key="item">
            <div class="grid">
                <input type="text" :name="'description-' + index" placeholder="DescripciÃ³n" required>
                <input type="number" step="0.01" :name="'amount-' + index" placeholder="Monto" required>
                <button type="button" x-on:click="items.splice(index, 1)">Eliminar</button>
            </div>
        </template>

        <button type="button" x-on:click="items.push(counter++)">Agregar</button>
        <input type="text" name="total_items" :value="items.length" hidden>
        <button type="submit">Submit</button>
    </form>
</article>
{% endblock %}